# test staging files via git
type: git
repo: ssh://remote-git/root/repo.git
repo_base_name: repo
dest: "/root"
version: master
key_file: "hosts/{{ inventory_hostname }}/files/id_rsa"

# the git module doesn't accept the mode parameters
#directory_mode:
#mode:

# test configuration, not part of ansible role
_test_config:
  paths:
    # all copie paths, files *and* directories
    # add trailing slashes to directories for readability
    - /root/repo
    - /root/repo/cloned_file
    - /root/repo/cloned_directory
    - /root/repo/cloned_directory/cloned_file
  # for convenience all files are the same content
  # NOTE there is a newline in the source file
  file_contents: "This file was cloned from a git repo's master branch.\n"
  # define the expected modes, though they aren't controlled by our configuration or playbook
  # mode must be specified as a string representation of an octal integer for testing
  directory_mode: "0755"
  mode: "0644"
